# ğŸ“Š DIAGRAMA DE ARQUITETURA - Setup Token Interativo

## Arquitetura da SoluÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENTE FINAL                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. Download SminDeck-Setup.exe                                            â”‚
â”‚           â†“                                                                â”‚
â”‚  2. Execute e siga wizard                                                  â”‚
â”‚           â†“                                                                â”‚
â”‚  3. Marque "Bot Discord (modo remoto)"                                     â”‚
â”‚           â†“                                                                â”‚
â”‚  4. Instalador executa SminDeckBot-Setup.exe                               â”‚
â”‚           â†“                                                                â”‚
â”‚  5. SminDeckBot-Setup.exe executa setup_token.exe                          â”‚
â”‚           â†“                                                                â”‚
â”‚  6. setup_token.exe pede token (GUI interativa)                            â”‚
â”‚           â†“                                                                â”‚
â”‚  7. Token salvo em %APPDATA%\SminDeckBot\.env                              â”‚
â”‚           â†“                                                                â”‚
â”‚  8. SminDeckBot-Setup.exe inicia discord_bot.exe + api_server.exe         â”‚
â”‚           â†“                                                                â”‚
â”‚  9. SminDeck.exe abre pronto para usar                                     â”‚
â”‚           â†“                                                                â”‚
â”‚  10. /setup no Discord â†’ Chave de conexÃ£o                                  â”‚
â”‚           â†“                                                                â”‚
â”‚  11. Cola chave em SminDeck â†’ CONECTADO!                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Estrutura de Arquivos

```
DISTRIBUIÃ‡ÃƒO:
â””â”€â”€ SminDeck-Setup.exe â† ÃšNICO ARQUIVO QUE CLIENTE PRECISA

INSTALADO (padrÃ£o):
C:\Program Files\SminDeck\
â”œâ”€â”€ SminDeck.exe
â”œâ”€â”€ bot_installer\
â”‚   â””â”€â”€ SminDeckBot-Setup.exe
â””â”€â”€ assets\
    â””â”€â”€ ...

DADOS DO USUÃRIO:
%APPDATA%\SminDeckBot\
â”œâ”€â”€ .env                    â† Token do Discord
â”œâ”€â”€ smindeck_bot.db        â† Banco de dados
â”œâ”€â”€ discord_bot.exe        â† Bot rodando
â””â”€â”€ api_server.exe         â† API rodando
```

## Fluxo de CompilaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DESENVOLVIMENTO                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SminDeck-Bot-Discord/make_exe.bat                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [1/6] Limpando builds          â†’ rm build/ dist/               â”‚
â”‚ [2/6] Limpando builds          â†’ (confirmaÃ§Ã£o)                 â”‚
â”‚ [3/6] Gerando discord_bot.exe  â†’ PyInstaller --noconsole      â”‚
â”‚ [4/6] Gerando api_server.exe   â†’ PyInstaller --noconsole      â”‚
â”‚ [5/6] Gerando start_bot.exe    â†’ PyInstaller --windowed       â”‚
â”‚ [6/6] Gerando setup_token.exe  â†’ PyInstaller --windowed   âœ¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SminDeck-Bot-Discord/installer/SminDeckBot.iss                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Inno Setup] Compilar SminDeckBot-Setup.exe                    â”‚
â”‚   âœ“ Copia EXEs de dist/                                       â”‚
â”‚   âœ“ Inclui setup_token.exe                                    â”‚
â”‚   âœ“ Configura run sequence:                                   â”‚
â”‚     1. setup_token.exe (pede token)                           â”‚
â”‚     2. start_bot.exe (inicia bot)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Smin-DECK virtual/build.bat                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [PyInstaller] Compilar SminDeck.exe                            â”‚
â”‚ [Copy] SminDeckBot-Setup.exe para dist/                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Smin-DECK virtual/installer.iss                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Inno Setup] Compilar SminDeck-Setup.exe                       â”‚
â”‚   âœ“ Copia SminDeck.exe                                        â”‚
â”‚   âœ“ Copia SminDeckBot-Setup.exe                               â”‚
â”‚   âœ“ Componentes:                                              â”‚
â”‚     - app (SminDeck) - obrigatÃ³rio                            â”‚
â”‚     - bot (Bot Discord) - opcional                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESULTADO: dist/SminDeck-Setup.exe                              â”‚
â”‚ âœ… Pronto para distribuiÃ§Ã£o!                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Componentes e DependÃªncias

```
SminDeck-Setup.exe
â”œâ”€â”€ SminDeck.exe
â”‚   â”œâ”€â”€ PyQt6 (GUI)
â”‚   â”œâ”€â”€ PIL (Imagens)
â”‚   â”œâ”€â”€ requests (HTTP)
â”‚   â””â”€â”€ python-dotenv (.env)
â”‚
â””â”€â”€ SminDeckBot-Setup.exe
    â”œâ”€â”€ setup_token.exe
    â”‚   â””â”€â”€ PyQt6 (GUI)
    â”‚
    â”œâ”€â”€ discord_bot.exe
    â”‚   â”œâ”€â”€ discord.py (Discord API)
    â”‚   â”œâ”€â”€ Flask (API)
    â”‚   â”œâ”€â”€ sqlite3 (Database)
    â”‚   â””â”€â”€ python-dotenv (.env)
    â”‚
    â”œâ”€â”€ api_server.exe
    â”‚   â””â”€â”€ Flask (API)
    â”‚
    â””â”€â”€ start_bot.exe
        â””â”€â”€ subprocess (launcher)
```

## ComunicaÃ§Ã£o Entre Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SminDeck.exe    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ HTTP POST (localhost:5000)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  api_server.exe          â”‚ (port 5000)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ IPC/subprocess
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  discord_bot.exe         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ .env (DISCORD_TOKEN)   â”‚
â”‚ â€¢ Discord API gateway    â”‚
â”‚ â€¢ SQLite database        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ WebSocket
    Discord Servers
         â†“
    Discord Channels
```

## Arquivos por Etapa

### Etapa 1: CompilaÃ§Ã£o do Bot
```
SminDeck-Bot-Discord/
â”œâ”€â”€ setup_token.py âœ… (novo)
â”œâ”€â”€ discord_bot.py âœ… (atualizado)
â”œâ”€â”€ api_server.py
â”œâ”€â”€ start_bot.py
â”œâ”€â”€ make_exe.bat âœ… (atualizado)
â”œâ”€â”€ requirements.txt
â””â”€â”€ installer/
    â””â”€â”€ SminDeckBot.iss âœ… (atualizado)
```

### Etapa 2: CompilaÃ§Ã£o do SminDeck
```
Smin-DECK virtual/
â”œâ”€â”€ main.py
â”œâ”€â”€ deck_window.py âœ… (referÃªncias bot)
â”œâ”€â”€ build.bat
â”œâ”€â”€ installer.iss âœ… (atualizado)
â””â”€â”€ bot_installer/
    â”œâ”€â”€ SminDeckBot-Setup.exe âœ…
    â”œâ”€â”€ setup_token.exe âœ…
    â”œâ”€â”€ discord_bot.exe âœ…
    â”œâ”€â”€ api_server.exe âœ…
    â”œâ”€â”€ start_bot.exe âœ…
    â””â”€â”€ .env.template âœ…
```

### Etapa 3: DistribuiÃ§Ã£o
```
dist/
â”œâ”€â”€ SminDeck.exe âœ…
â”œâ”€â”€ SminDeck-Setup.exe âœ… â† DISTRIBUIR ISTO
â””â”€â”€ SminDeckBot-Setup.exe âœ…
```

## SeguranÃ§a de Token

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Discord Developer Portal            â”‚
â”‚ (Cliente copia token)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ (rede insegura OK, Ã© sÃ³ uma vez)
                 â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ setup_token   â”‚
         â”‚ .exe (GUI)    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ (local, seguro)
                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ %APPDATA%\SminDeckBot\     â”‚
         â”‚ .env (DISCORD_TOKEN=...)   â”‚
         â”‚ Protegido por permissÃµes   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ (local process, seguro)
                  â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ discord_bot.exe            â”‚
         â”‚ LÃª token do .env            â”‚
         â”‚ Conecta ao Discord          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Checklist de ImplementaÃ§Ã£o

```
âœ… setup_token.py criado
âœ… setup_token.exe compilado
âœ… discord_bot.py validaÃ§Ã£o adicionada
âœ… make_exe.bat atualizado
âœ… SminDeckBot.iss atualizado
âœ… SminDeckBot-Setup.exe compilado
âœ… build.bat atualizado
âœ… installer.iss atualizado
âœ… SminDeck-Setup.exe compilado
âœ… DocumentaÃ§Ã£o criada (7 arquivos)
âœ… Tudo testado e pronto
```

## PrÃ³ximos Passos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ImplementaÃ§Ã£o Completa            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â­ï¸  Teste em VM Windows Limpa       â”‚
â”‚ â€¢ Verificar token prompt             â”‚
â”‚ â€¢ Validar bot inicia                 â”‚
â”‚ â€¢ Testar conexÃ£o SminDeck â†” Bot      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â­ï¸  DistribuiÃ§Ã£o para Clientes       â”‚
â”‚ â€¢ Upload SminDeck-Setup.exe          â”‚
â”‚ â€¢ InstruÃ§Ãµes para instalaÃ§Ã£o         â”‚
â”‚ â€¢ Suporte a novos usuÃ¡rios           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**VersÃ£o**: 1.2.0  
**Status**: âœ… ImplementaÃ§Ã£o Completa  
**PrÃ³ximo**: DistribuiÃ§Ã£o  
